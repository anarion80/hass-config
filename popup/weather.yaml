action: fire-dom-event
browser_mod:
  service: browser_mod.popup
  data:
    title: Pogoda
    style: >
      --popup-max-width: calc(500px + 500px);
      --ha-card-border-radius: 0;
    size: NORMAL
    card_mod:
      style:
        layout-card:
          $grid-layout$:
            # card divider border
            .: |
              #root {
                  margin: -24px 0 !important;
              }
            config-template-card:
              $: |
                .card-content {
                  padding: var(--tablet-popup-content-padding);
                  padding-bottom: 0.8em;
                }
                #root {
                  border-right: 1.5px solid rgba(0, 0, 0, 0.2);
                  border-radius: 0;
                  transition: none;
                  padding: 1.5em;
                }
                }
                /* portrait */
                @media screen and (max-width: 1200px) {
                  #root {
                    border-right: none;
                    border-bottom: 1.5px solid rgba(0, 0, 0, 0.2);
                  }
                }
    content:
      type: custom:layout-card
      layout_type: custom:grid-layout
      layout:
        margin: 0
        grid-template-columns: 500px 500px
        grid-template-rows: 1fr
        grid-template-areas: |
          "meteo other"
        mediaquery:
          #phone
          "(max-width: 800px)":
            grid-template-columns: 1fr
            grid-template-rows: repeat(2, 1fr)
            grid-template-areas: |
              "meteo"
              "other"
      cards:

        #################################################
        #                                               #
        #                      METEO                    #
        #                                               #
        #################################################
        - type: custom:config-template-card
          view_layout:
            grid-area: meteo
          entities:
            - sensor.meteo_url
          card:
            type: picture
            entity: sensor.meteo_url
            image: ${states['sensor.meteo_url'].state}

        #################################################
        #                                               #
        #                      OTHER                    #
        #                                               #
        #################################################

        - type: vertical-stack
          view_layout:
            grid-area: other
          cards:
            # - type: custom:weather-chart-card
            #   title: Pogoda
            #   entity: weather.openweathermap
            #   #mode: daily
            - type: custom:platinum-weather-card
              card_config_version: 8
              entity_apparent_temp: sensor.openweathermap_feels_like_temperature
              entity_forecast_icon: weather.openweathermap
              entity_forecast_icon_1: weather.openweathermap
              entity_forecast_max: sensor.openweathermap_forecast_temperature
              entity_forecast_max_1: weather.openweathermap
              entity_forecast_min: sensor.openweathermap_forecast_temperature_low
              entity_forecast_min_1: weather.openweathermap
              entity_humidity: sensor.openweathermap_humidity
              entity_pop: sensor.openweathermap_forecast_precipitation_probability
              entity_pop_1: weather.openweathermap
              entity_pos: sensor.openweathermap_rain
              entity_pos_1: weather.openweathermap
              entity_pressure: sensor.openweathermap_pressure
              entity_summary: weather.openweathermap
              entity_summary_1: weather.openweathermap
              entity_temperature: sensor.openweathermap_temperature
              entity_update_time: sensor.openweathermap_forecast_time
              entity_wind_bearing: sensor.openweathermap_wind_bearing
              entity_wind_speed: sensor.openweathermap_wind_speed
              section_order:
                - overview
                - extended
                - slots
                - daily_forecast
              show_section_daily_forecast: true
              show_section_extended: false
              show_section_slots: true
              slot_l1: forecast_max
              slot_l2: forecast_min
              slot_l3: wind
              slot_l4: pressure
              slot_l5: sun_next
              slot_l6: remove
              slot_l7: remove
              slot_l8: remove
              slot_r1: popforecast
              slot_r2: humidity
              slot_r3: uv_summary
              slot_r4: remove
              slot_r5: sun_following
              slot_r6: remove
              slot_r7: remove
              slot_r8: remove


            - type: custom:auto-entities
              card:
                type: entities
              filter:
                include:
                  - entity_id: '*antistorm*'
                exclude: []
              sort:
                method: none
            # - type: custom:auto-entities
            #   card:
            #     type: entities
            #   filter:
            #     include:
            #       - entity_id: '*.*airly*'
            #     exclude: []
            #   sort:
            #     method: none
            #   view_layout:
            #     grid-area: doors
            #   title: Airly
            #   show_header_toggle: false
