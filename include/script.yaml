script:

  ####################################################
  #                                                  #
  #                      SCRIPT                      #
  #                                                  #
  ####################################################

  # monitors_mute:
    # sequence:
      # - choose:
        # - conditions:
            # - condition: state
              # entity_id: binary_sensor.monitors_mute_check
              # state: 'off'
          # sequence:
            # - service: shell_command.monitors_mute_on
        # default:
          # - service: shell_command.monitors_mute_off
      # - delay:
          # milliseconds: 300
      # - service: homeassistant.update_entity
        # entity_id: binary_sensor.monitors_mute_check

  homeassistant_restart:
    sequence:
      - service: browser_mod.toast
        data:
          duration: 16000
          message: Restarting Home Assistant container...
      - service: shell_command.ha_dockermon_restart_container

  homeassistant_core_update:
    sequence:
      - service: shell_command.ha_core_update

  homeassistant_supervisor_update:
    sequence:
      - service: shell_command.ha_supervisor_update

  zoned_cleanup:
    sequence:
      - condition: not
        conditions:
          - condition: state
            entity_id: input_select.roborock_zone
            state: No selection
      - service: vacuum.send_command
        data:
          entity_id: vacuum.rockrobo
          command: zoned_cleanup
          params:
            zone_ids: ["{{ states('input_select.roborock_zone') }}"]

  samsung_tv_energy_saving:
    alias: Eco mode
    icon: mdi:leaf
    sequence:
      - service: browser_mod.toast
        data:
          duration: 8000
          message: Setting Eco mode on TV in the bedroom...
      - service: media_player.play_media
        data:
          entity_id: media_player.samsung_tv
          media_content_type: send_key
          media_content_id: >
            KEY_MENU+870+KEY_DOWN+470+KEY_DOWN+470+KEY_DOWN+470+KEY_ENTER+870+KEY_DOWN+470+KEY_DOWN+470+KEY_DOWN+470+KEY_DOWN+470+KEY_ENTER+870+KEY_ENTER+870+KEY_DOWN+470+KEY_DOWN+470+KEY_ENTER+870+KEY_HOME+470+KEY_HOME+470

  mattias_find_my_iphone:
    sequence:
      - repeat:
          count: 3
          sequence:
            - service: notify.mobile_app_nokia_8_3_5g
              data:
                title: Find my Phone
                message: I'm here
                data:
                  push:
                    sound:
                      name: Ringtone_UK_Haptic.caf
                      critical: 1
                      volume: 1.0
            - delay:
                seconds: 4

  sanja_find_my_iphone:
    sequence:
      - repeat:
          count: 3
          sequence:
            - service: notify.mobile_app_redmi_note_5
              data:
                title: Find my Phone
                message: I'm here
                data:
                  push:
                    sound:
                      name: Ringtone_UK_Haptic.caf
                      critical: 1
                      volume: 1.0
            - delay:
                seconds: 4

  ####################################################
  #                                                  #
  #               HOME ARRIVE / LEAVE                #
  #                                                  #
  ####################################################

  home_arrive:
    alias: Home
    sequence:
      - choose:
        - conditions:
            - condition: state
              entity_id: light.fire_tablet_screen
              state: 'on'
            - condition: state
              entity_id: switch.fire_tablet_screensaver
              state: 'off'
          sequence:
            - service: tts.google_cloud_say
              data:
                entity_id: media_player.fire_tablet_media_player
                message: >
                  {{ ['Witaj', 'Cześć', 'Hej', 'Witaj w domu'] | random }}
      - choose:
        - conditions:
            - condition: state
              entity_id: sun.sun
              state: below_horizon
          sequence:
            - service: scene.turn_on
              data:
                entity_id: scene.hemma_below_horizon
        default:
          - service: scene.turn_on
            data:
              entity_id: scene.hemma_above_horizon
      - delay:
          seconds: 4

  home_leave:
    alias: Close everything
    sequence:
      - service: tts.google_cloud_say
        data:
          entity_id: media_player.nest_mini
          message: >
            {{ ['Do widzenia', 'Pa Pa', 'Cześć', 'Już za tobą tęsknię', 'Wyłączam wszystko'] | random }}
      - service: homeassistant.turn_off
        data:
          entity_id: >
            {% set states = [
              states.light.all_lights_exclude_hall,
              states.light.yeelight_hania,
              states.switch.wemo_fan,
              states.switch.wemo_monitors,
              states.switch.radio,
              states.switch.balkong,
              states.switch.tv,
              states.fan.sovrum_anslut ] %}
            {{ states | selectattr('state','eq','on') | map(attribute='entity_id') | list }}
      - delay:
          seconds: 1
      - service: fan.turn_off
        entity_id: fan.zhimi_airpurifier_v7
      - delay:
          seconds: 4
